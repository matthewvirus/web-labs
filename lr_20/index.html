<!DOCTYPE html>
<html>
    <head>
        <title>LR 20</title>
    </head>
    <body>
        <div class="main-lr">
            <div class="n1-2">
                <button class="json-obj">Json to Object</button>
                <ul class="monthes">
                </ul>
            </div>
            <div class="n3">
                <button class="append-list">Add list on page</button>
            </div>
            <div class="n4">
                <button class="body-children">Get body children</button>
            </div>
            <div class="n5">
                <button class="create-table">Create a table</button>
            </div>
            <div class="n8">
                <form onsubmit="return false">
                    <div>
                        <label for="name">Name*</label>
                        <input class="name" type="text" name="name">
                    </div>
                    <div>
                        <label for="surname">Surname*</label>
                        <input class="surname" type="text" name="surname">
                    </div>
                    <div>
                        <label for="Age">Age*</label>
                        <input class="age" type="number" name="age">
                    </div>
                    <div>
                        <label for="passwrord">Passwrord*</label>
                        <input class="password" type="text" name="password">
                    </div>
                    <div>
                        <input class="submit" type="submit" value="Submit">
                    </div>
                </form>
            </div>
            <div class="n9">
                <label class="switch">
                    <input type="checkbox" class="slider">
                    <span class="slider-round"></span>
                    <span class="slider-text">Off</span>
                </label>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
        <script>
        $(document).ready(function() {
            // tasks 1,2

            let jsonString = '';
            let listItems = [
                'January', 
                'February', 
                'March', 
                'April', 
                'May', 
                'June', 
                'July', 
                'August', 
                'September', 
                'October', 
                'November', 
                'December'
            ];

            $('.json-obj').click(addElementsToString);
            
            function addElementsToString() {
                jsonString += '{';
                for(let i = 0; i < listItems.length; i++) {
                    jsonString += '"v' + i + '": "' + listItems[i] + '",';
                }
                jsonString = jsonString.slice(0, -1);
                jsonString += '}';
                console.log(jsonString);
                JSON.parse(jsonString, function(_k,v) {
                    return (typeof(v) !== 'object')? $('.monthes').append($('<li>').html(v)) : undefined;
                });
            }

            // task 3

            let user = {
                name: "Matthew",
                dob: new Date("July 25, 2004").toLocaleDateString(
                    'en-us', 
                    { weekday:"long", year:"numeric", month:"short", day:"numeric"}
                ),
                passwordHash: "bf19a0254f74dc96e2998a1de1150a8899936cbcc31448ab018bcba99ca4ef87"
            };

            $('.append-list').click(appendListOnPage);

            function appendListOnPage() {
                $('.n3').append($('<ul>')
                .append([
                    addElToList(user.name),
                    addElToList(user.dob),
                    addElToList(user.passwordHash)]));
            }
            function addElToList(field) {
                return $('<li>').html(field);
            }

            // task 4

            let childrenList = [];
            
            $('.body-children').click(function() {
                $('body').children().each(function() {
                    console.log($(this));
                });
            });

            // task 5, 6

            $('.create-table').click(createTable);
            function createTable() {
                $('.n5').append($('<table>')
                    .append($('<tr>')
                        .append($('<th>'))
                        .append($('<th>').text("PRESENT").addClass('time'))
                        .append($('<th>').text("PAST").addClass('time'))
                        .append($('<th>').text("FUTURE").addClass('time')))
                    .append($('<tr>')
                        .append($('<th>').text("+"))
                        .append($('<td>').text("I dance"))
                        .append($('<td>').text("I danced"))
                        .append($('<td>').text("I will dance")))
                    .append($('<tr>')
                        .append($('<th>').text("-"))
                        .append($('<td>').text("I don't dance"))
                        .append($('<td>').text("I din't dance"))
                        .append($('<td>').text("I'll not dance")))
                    .append($('<tr>')
                        .append($('<th>').text("?"))
                        .append($('<td>').text("Do I dance?"))
                        .append($('<td>').text("Did I dance?"))
                        .append($('<td>').text("Will I dance?")))
                );
                $('th').addClass('headers');
                $('td').addClass('descs');
                $('.headers').css({
                    "color": "white",
                    "background-color": "#4db6ac",
                    "font-family": "system-ui",
                    "font-size": "12px",
                    "padding": "10",
                    "font-weight": "bold"
                });
                $('.descs').css({
                    "color": "white",
                    "background-color": "#26c6da",
                    "font-family": "system-ui",
                    "font-size": "10px",
                    "padding": "10",
                    "font-weight": "normal",
                    "text-align": "center"
                });
            }

            // task 7

            $('body').on('mouseover', '.time', function() {
                alert($(this).text());
            });

            // task 8
            
            $('body').on('click', '.submit', function() {
                $('.error').css("color", "red");
            });

            $('.submit').click(validateForm);

            function validateForm() {
                let validationArray = [];
                let i = 0;

                let name = $('.name').val();
                let surname = $('.surname').val();
                let age = $('.age').val();
                let password = $('.password').val();

                validationArray.push(validateElements(name, 'Name', '.name'));
                validationArray.push(validateElements(surname, 'Surname', '.surname'));
                validationArray.push(validateElements(age, 'Age', '.age'));
                validationArray.push(validateElements(password, 'Password', '.password'));

                validationArray.forEach(function(el) {
                    if (el) i++; 
                });
                if (i === validationArray.length) {
                    alert('Success!')
                };
            }

            function validateElements(value, elName, elClass) {
                if (value.length === 0) {
                    $(elClass).after('<br><span class="error">' + elName + ' is required</span>');
                    return false;
                }
                $(elClass).children($('span').hide());
                return true;
            }

            // task 9
            $('.switch').click(
                function() {
                    $('.slider').animate( {
                        "background-color": "blue"
                    });
                }
            );
        });
        </script>
    </body>
</html>